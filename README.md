# 代码日志优化说明

## 概述
本次优化将原有的 `print` 语句全部替换为结构化的日志系统，提供了更好的调试和监控能力。

## 主要改进

### 1. 日志系统配置
- 添加了 `setup_logger()` 函数来配置日志系统
- 支持同时输出到控制台和文件 (`demo.log`)
- 日志格式包含时间戳、文件名、行号等信息

### 2. 日志函数
提供了三个主要的日志函数：

- `log_info(message)`: 记录信息日志
- `log_warning(message)`: 记录警告日志  
- `log_error(message)`: 记录错误日志

### 3. 日志格式
每条日志包含以下信息：
- 当前时间戳
- 文件名和行号
- 日志级别
- 具体消息内容

示例输出：
```
2024-01-15 10:30:45 - demo - INFO - [demo.py:95] - 状态码: 200
2024-01-15 10:30:46 - demo - ERROR - [demo.py:120] - 等待响应超时
```

### 4. 替换的print语句
所有原有的 `print` 语句都已替换为相应的日志函数：
- 一般信息输出 → `log_info()`
- 错误信息输出 → `log_error()`
- 警告信息输出 → `log_warning()`

### 5. 日志文件
- 日志文件：`demo.log`
- 编码：UTF-8
- 位置：与脚本同目录

## 使用方法

### 运行原脚本
```bash
python demo.py
```

### 查看日志
```bash
# 实时查看日志
tail -f demo.log

# 查看最新日志
tail -20 demo.log
```

### 测试日志功能
```bash
python test_log.py
```

## 优势

1. **结构化输出**: 统一的日志格式，便于解析和分析
2. **时间戳**: 每条日志都包含精确的时间信息
3. **位置信息**: 显示文件名和行号，便于定位问题
4. **分级管理**: 不同级别的日志便于过滤和查找
5. **持久化**: 日志保存到文件，便于后续分析
6. **调试友好**: 保留了原有的调试信息，但格式更加规范

## 注意事项

1. 日志文件会持续增长，建议定期清理或使用日志轮转
2. 敏感信息（如token）在日志中会显示，生产环境需要注意安全
3. 日志级别可以根据需要调整（DEBUG, INFO, WARNING, ERROR, CRITICAL）

## 文件结构
```
py_tryon/
├── demo.py          # 主脚本（已优化）
├── test_log.py      # 日志测试脚本
├── demo.log         # 日志文件（运行时生成）
└── README.md        # 本说明文件
```
